<html lang="en"><script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/content/location/location.js" id="eppiocemhmnlbhjplcgkofciiegomcon"></script><script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/extend-native-history-api.js"></script><script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/requests.js"></script><head><style type="text/css">.turbo-progress-bar {
  position: fixed;
  display: block;
  top: 0;
  left: 0;
  height: 3px;
  background: #0076ff;
  z-index: 2147483647;
  transition:
    width 300ms ease-out,
    opacity 150ms 150ms ease-in;
  transform: translate3d(0, 0, 0);
}
</style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="x-icon" href="1.png">
    <title>Quiz Website By Bidhan Acharya</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&amp;display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script><script bis_use="true" type="text/javascript" charset="utf-8" data-bis-config="[&quot;facebook.com/&quot;,&quot;twitter.com/&quot;,&quot;youtube-nocookie.com/embed/&quot;,&quot;//vk.com/&quot;,&quot;//www.vk.com/&quot;,&quot;linkedin.com/&quot;,&quot;//www.linkedin.com/&quot;,&quot;//instagram.com/&quot;,&quot;//www.instagram.com/&quot;,&quot;//www.google.com/recaptcha/api2/&quot;,&quot;//hangouts.google.com/webchat/&quot;,&quot;//www.google.com/calendar/&quot;,&quot;//www.google.com/maps/embed&quot;,&quot;spotify.com/&quot;,&quot;soundcloud.com/&quot;,&quot;//player.vimeo.com/&quot;,&quot;//disqus.com/&quot;,&quot;//tgwidget.com/&quot;,&quot;//js.driftt.com/&quot;,&quot;friends2follow.com&quot;,&quot;/widget&quot;,&quot;login&quot;,&quot;//video.bigmir.net/&quot;,&quot;blogger.com&quot;,&quot;//smartlock.google.com/&quot;,&quot;//keep.google.com/&quot;,&quot;/web.tolstoycomments.com/&quot;,&quot;moz-extension://&quot;,&quot;chrome-extension://&quot;,&quot;/auth/&quot;,&quot;//analytics.google.com/&quot;,&quot;adclarity.com&quot;,&quot;paddle.com/checkout&quot;,&quot;hcaptcha.com&quot;,&quot;recaptcha.net&quot;,&quot;2captcha.com&quot;,&quot;accounts.google.com&quot;,&quot;www.google.com/shopping/customerreviews&quot;,&quot;buy.tinypass.com&quot;,&quot;gstatic.com&quot;,&quot;secureir.ebaystatic.com&quot;,&quot;docs.google.com&quot;,&quot;contacts.google.com&quot;,&quot;github.com&quot;,&quot;mail.google.com&quot;,&quot;chat.google.com&quot;,&quot;audio.xpleer.com&quot;,&quot;keepa.com&quot;,&quot;static.xx.fbcdn.net&quot;,&quot;sas.selleramp.com&quot;,&quot;1plus1.video&quot;,&quot;console.googletagservices.com&quot;,&quot;//lnkd.demdex.net/&quot;,&quot;//radar.cedexis.com/&quot;,&quot;//li.protechts.net/&quot;,&quot;challenges.cloudflare.com/&quot;,&quot;ogs.google.com&quot;]" src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/executors/traffic.js"></script>
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding-bottom: 40px;
            overflow-y: auto;
            color: #555;
        }

        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            background: linear-gradient(135deg, #4facfe, #00f2fe, #ff6ec7);
        }

        .quiz-container {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(240, 248, 255, 0.9));
            border-radius: 16px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 650px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            animation: fadeIn 0.6s ease-out;
            margin-top: 20px;
        }

        .quiz-container:hover {
            transform: scale(1.03);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
        }

        .quiz-header h2 {
            color: #2c3e50;
            font-size: clamp(1.5rem, 5vw, 2rem);
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }

        ul {
            list-style-type: none;
            padding: 0;
            margin: 20px 0;
        }

        ul li {
            margin: 10px 0;
            text-align: left;
            transition: all 0.3s ease;
        }

        ul li label {
            display: flex;
            align-items: center;
            padding: 12px;
            background: linear-gradient(to right, #f8fafc, #eef2f7);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        ul li label:hover {
            background: linear-gradient(to right, #e2e8f0, #d1d9e6);
            color: #2c3e50;
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.2);
            accent-color: #5cb85c;
        }

        .button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        button {
            background: linear-gradient(45deg, #5cb85c, #44a344);
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: 700;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            width: auto;
            min-width: 100px;
        }

        button:hover {
            background: linear-gradient(45deg, #4cae4c, #3d8b3d);
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }

        .progress-container {
            width: 100%;
            background: #e2e8f0;
            border-radius: 10px;
            height: 20px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            background: linear-gradient(to right, #5cb85c, #7ed957);
            height: 100%;
            border-radius: 10px;
            width: 0;
            transition: width 0.4s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #topic-selection {
            background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), 
                            url('https://images.unsplash.com/photo-1503435980610-a66907677a40?ixlib=rb-4.0.3&auto=format&fit=crop&w=1770&q=80');
            background-size: cover;
            background-position: center;
            border-radius: 12px;
            padding: 20px;
            color: #fff;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.6);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }

        #topic-selection:hover {
            transform: scale(1.02);
        }

        #topic-selection h2 {
            font-size: clamp(1.8rem, 6vw, 2.2rem);
            text-align: center;
            grid-column: 1 / -1;
            margin-bottom: 15px;
            font-weight: 700;
        }

        #topic-selection button {
            padding: 10px 20px;
            font-size: 0.9rem;
            font-weight: 600;
            border-radius: 6px;
            background: linear-gradient(45deg, #6366f1, #4f46e5);
            color: #fff;
            text-shadow: none;
            transition: all 0.3s ease;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
        }

        #topic-selection button:hover {
            background: linear-gradient(45deg, #4f46e5, #4338ca);
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.4);
        }

        #results {
            font-size: clamp(1.2rem, 4vw, 1.5rem);
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }

        #timer {
            font-size: clamp(1.2rem, 4vw, 1.4rem);
            color: #e44d26;
            font-weight: 600;
            margin-bottom: 15px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.8);
            padding: 6px 12px;
            border-radius: 8px;
        }

        #error-message {
            color: #dc2626;
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            font-weight: 600;
            margin-top: 10px;
            background: rgba(255, 245, 245, 0.9);
            padding: 8px;
            border-radius: 6px;
        }

        #score-display {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.8);
            padding: 6px 12px;
            border-radius: 8px;
        }

        #answer-explanation {
            font-size: 0.9rem;
            color: #444;
            margin-top: 5px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 5px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .quiz-header {
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideOut {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(50px); }
        }

        .correct-answer {
            background: linear-gradient(to right, #d4edda, #c3e6cb) !important;
            animation: pulse 0.5s ease;
        }

        .wrong-answer {
            background: linear-gradient(to right, #f8d7da, #f5c6cb) !important;
            animation: shake 0.5s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        footer {
            margin-top: 20px;
            margin-bottom: 20px;
            font-family: 'Times New Roman', Times, serif;
            font-size: clamp(12px, 3vw, 18px);
            color: white;
            text-align: center;
            width: 90%;
            max-width: 650px;
            background: rgba(0, 0, 0, 0.75);
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 640px) {
            body {
                padding-bottom: 60px;
            }

            .quiz-container {
                padding: 15px;
                margin-top: 10px;
            }

            ul li label {
                padding: 10px;
                font-size: 0.9rem;
            }

            button {
                padding: 8px 16px;
                font-size: 0.9rem;
                min-width: 80px;
            }

            #topic-selection {
                padding: 15px;
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }

            #topic-selection button {
                padding: 8px 16px;
                font-size: 0.85rem;
            }

            .progress-container {
                height: 15px;
            }

            .button-container {
                flex-direction: column;
                gap: 8px;
            }

            footer {
                margin-top: 15px;
                margin-bottom: 15px;
                font-size: clamp(10px, 2.5vw, 14px);
            }
        }

        @media (min-width: 641px) and (max-width: 1024px) {
            .quiz-container {
                width: 85%;
            }

            #topic-selection {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            }

            footer {
                margin-top: 20px;
            }
        }
    </style>
<script type="module" src="chrome-extension://lpdfdheclggihiflmodagaccofobklje/assets/js/t.js"></script><script src="chrome-extension://lpdfdheclggihiflmodagaccofobklje/assets/js/i.js"></script></head>
<body __processed_230fda74-5418-4ca1-b857-9c4247d60b9b__="true" bis_register="W3sibWFzdGVyIjp0cnVlLCJleHRlbnNpb25JZCI6ImVwcGlvY2VtaG1ubGJoanBsY2drb2ZjaWllZ29tY29uIiwiYWRibG9ja2VyU3RhdHVzIjp7IkRJU1BMQVkiOiJlbmFibGVkIiwiRkFDRUJPT0siOiJlbmFibGVkIiwiVFdJVFRFUiI6ImVuYWJsZWQiLCJSRURESVQiOiJlbmFibGVkIiwiUElOVEVSRVNUIjoiZW5hYmxlZCIsIklOU1RBR1JBTSI6ImVuYWJsZWQiLCJMSU5LRURJTiI6ImRpc2FibGVkIiwiQ09ORklHIjoiZGlzYWJsZWQifSwidmVyc2lvbiI6IjIuMC4yMiIsInNjb3JlIjoyMDAyMjB9XQ==">
    <div id="particles-js" bis_skin_checked="1"><canvas class="particles-js-canvas-el" style="width: 100%; height: 100%;" width="853" height="1280"></canvas></div>
    <div class="confetti-container" bis_skin_checked="1"></div>
    <div class="quiz-container" bis_skin_checked="1">
        <div id="topic-selection" bis_skin_checked="1">
            <h2>Select a Quiz Topic:</h2>
            <button onclick="startQuiz('science')" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Science</button>
            <button onclick="startQuiz('computer')" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Computer</button>
            <button onclick="startQuiz('sports')" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Sports</button>
            <button onclick="startQuiz('tvmovie')" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">TV &amp; Movie</button>
            <button onclick="startQuiz('music')" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Music</button>
            <button onclick="startQuiz('fooddrink')" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Food &amp; Drink</button>
            <button onclick="startQuiz('geography')" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Geography</button>
            <button onclick="startQuiz('history')" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">History</button>
            <button onclick="startQuiz('general')" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">General Knowledge</button>
        </div>
        
        <div id="quiz-header" class="quiz-header" style="display:none;" bis_skin_checked="1">
            <h2 id="question">Question text</h2>
            <ul>
                <li><label for="a"><input type="radio" name="answer" class="answer" id="a"><span id="a_text">Answer A</span></label></li>
                <li><label for="b"><input type="radio" name="answer" class="answer" id="b"><span id="b_text">Answer B</span></label></li>
                <li><label for="c"><input type="radio" name="answer" class="answer" id="c"><span id="c_text">Answer C</span></label></li>
                <li><label for="d"><input type="radio" name="answer" class="answer" id="d"><span id="d_text">Answer D</span></label></li>
            </ul>
            <div id="answer-feedback" style="display:none; margin: 10px 0; padding: 10px; border-radius: 5px;" bis_skin_checked="1"></div>
            <div id="answer-explanation" style="display:none;" bis_skin_checked="1"></div>
        </div>
        
        <div id="score-display" style="display:none;" bis_skin_checked="1">Score: <span id="current-score">0</span>/<span id="total-questions">0</span></div>
        <div class="progress-container" style="display:none;" bis_skin_checked="1">
            <div class="progress-bar" id="progress-bar" bis_skin_checked="1"></div>
        </div>
        <div id="timer" style="display:none;" bis_skin_checked="1">Time Left: <span id="time">30</span> seconds</div>
        
        <div class="button-container" style="display:none;" bis_skin_checked="1">
            <button id="previous" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">Previous</button>
            <button id="home" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Home</button>
            <button id="submit" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Submit</button>
            <button id="next" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Next</button>
        </div>
        
        <div id="results" style="display:none;" bis_skin_checked="1"></div>
        <button id="restart" style="display:none;" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Restart</button>
        <div id="error-message" style="display:none;" bis_skin_checked="1"></div>
    </div>

    <audio id="correct-sound" src="https://www.soundjay.com/buttons/beep-01a.mp3"></audio>
    <audio id="wrong-sound" src="https://www.soundjay.com/buttons/beep-02.mp3"></audio>
    <audio id="finish-sound" src="https://www.soundjay.com/misc/sounds/magic-chime-01.mp3"></audio>

    <script>
        const quizHeader = document.getElementById('quiz-header');
        const questionEl = document.getElementById('question');
        const a_text = document.getElementById('a_text');
        const b_text = document.getElementById('b_text');
        const c_text = document.getElementById('c_text');
        const d_text = document.getElementById('d_text');
        const submitBtn = document.getElementById('submit');
        const homeBtn = document.getElementById('home');
        const previousBtn = document.getElementById('previous');
        const nextBtn = document.getElementById('next');
        const resultsDiv = document.getElementById('results');
        const restartBtn = document.getElementById('restart');
        const topicSelection = document.getElementById('topic-selection');
        const progressBar = document.getElementById('progress-bar');
        const progressContainer = document.querySelector('.progress-container');
        const timerDisplay = document.getElementById('time');
        const timerDiv = document.getElementById('timer');
        const confettiContainer = document.querySelector('.confetti-container');
        const buttonContainer = document.querySelector('.button-container');
        const errorMessageDiv = document.getElementById('error-message');
        const answerFeedback = document.getElementById('answer-feedback');
        const answerExplanation = document.getElementById('answer-explanation');
        const scoreDisplay = document.getElementById('score-display');
        const currentScoreEl = document.getElementById('current-score');
        const totalQuestionsEl = document.getElementById('total-questions');
        const correctSound = document.getElementById('correct-sound');
        const wrongSound = document.getElementById('wrong-sound');
        const finishSound = document.getElementById('finish-sound');
        
        let currentQuestion = 0;
        let score = 0;
        let quizData = [];
        let timer;
        let timeLeft = 30;
        let selectedTopic = null;
        let userAnswers = [];
        let submittedQuestions = new Set();
        
        const corsProxy1 = 'https://cors-anywhere.herokuapp.com/';
        const corsProxy2 = 'https://api.allorigins.win/raw?url=';

        function startQuiz(topic) {
            selectedTopic = topic;
            topicSelection.style.display = 'none';
            quizHeader.style.display = 'block';
            buttonContainer.style.display = 'flex';
            progressContainer.style.display = 'block';
            timerDiv.style.display = 'block';
            scoreDisplay.style.display = 'block';
            errorMessageDiv.style.display = 'none';
            loadQuizData(topic);
        }

        async function loadQuizData(topic) {
            const apiUrl = `https://opentdb.com/api.php?amount=10&category=${getCategoryId(topic)}&type=multiple`;
            try {
                let data = await fetchWithCORS(apiUrl, corsProxy1);
                if (!data || !data.results || data.results.length === 0) {
                    data = await fetchWithCORS(apiUrl, corsProxy2);
                }
                if (!data || !data.results || data.results.length === 0) {
                    quizData = getLocalQuizData(topic);
                    if (!quizData || quizData.length === 0) {
                        throw new Error('Failed to load questions from API and local data.');
                    }
                    console.warn('Using local quiz data.');
                } else {
                    quizData = data.results.map(question => {
                        return {
                            ...question,
                            question: decodeEntities(question.question),
                            correct_answer: decodeEntities(question.correct_answer),
                            incorrect_answers: question.incorrect_answers.map(decodeEntities),
                            explanation: getExplanation(topic, question.question)
                        };
                    });
                }
                currentQuestion = 0;
                score = 0;
                totalQuestionsEl.innerText = quizData.length;
                updateScoreDisplay();
                loadQuestion();
            } catch (error) {
                console.error('Error fetching quiz data:', error);
                questionEl.innerText = 'Failed to load questions. Please try again.';
                quizHeader.style.display = 'none';
                buttonContainer.style.display = 'none';
                errorMessageDiv.innerText = `Error: ${error.message}`;
                errorMessageDiv.style.display = 'block';
            }
        }

        async function fetchWithCORS(url, proxy) {
            const proxiedUrl = proxy + url;
            try {
                const response = await fetch(proxy === corsProxy2 ? proxiedUrl : url);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error(`Error fetching with proxy ${proxy}:`, error);
                return null;
            }
        }

        function decodeEntities(encodedString) {
            let textArea = document.createElement('textarea');
            textArea.innerHTML = encodedString;
            return textArea.value;
        }

        function getCategoryId(topic) {
            switch (topic) {
                case 'science': return 17;
                case 'computer': return 18;
                case 'sports': return 21;
                case 'tvmovie': return 11;
                case 'music': return 12;
                case 'fooddrink': return 9;
                case 'geography': return 22;
                case 'history': return 23;
                case 'general': return 9;
                default: return 9;
            }
        }

        function getLocalQuizData(topic) {
            switch (topic) {
                case 'science':
                    return [
                        { question: 'What is the chemical symbol for water?', correct_answer: 'H2O', incorrect_answers: ['CO2', 'NaCl', 'O2'], explanation: 'Water is composed of two hydrogen atoms and one oxygen atom, hence H2O.' },
                        { question: 'What is the largest planet in our solar system?', correct_answer: 'Jupiter', incorrect_answers: ['Mars', 'Saturn', 'Earth'], explanation: 'Jupiter has a diameter of about 139,820 km, making it the largest planet.' }
                    ];
                case 'computer':
                    return [
                        { question: 'What does CPU stand for?', correct_answer: 'Central Processing Unit', incorrect_answers: ['Computer Processing Unit', 'Central Process Unit', 'Computer Peripheral Unit'], explanation: 'The CPU is the brain of the computer, handling all processing tasks.' },
                        { question: 'What is the binary code?', correct_answer: '0 and 1', incorrect_answers: ['2 and 3', 'A and B', 'C and D'], explanation: 'Binary code uses only 0 and 1 to represent all data in computers.' }
                    ];
                default:
                    return null;
            }
        }

        function getExplanation(topic, question) {
            const explanations = {
                science: 'This is a fundamental concept in scientific study.',
                computer: 'This relates to basic computer architecture.',
                sports: 'This is a key fact in sports history.',
                tvmovie: 'This is an important detail from entertainment media.',
                music: 'This pertains to music theory or history.',
                fooddrink: 'This is a notable fact about cuisine.',
                geography: 'This is an essential geographical fact.',
                history: 'This is a significant historical event or fact.',
                general: 'This is common knowledge worth knowing.'
            };
            return explanations[topic] || 'This is an interesting fact to understand.';
        }

        function loadQuestion() {
            quizHeader.style.animation = 'slideOut 0.3s ease-out';
            setTimeout(() => {
                deselectAnswers();
                const currentQuizData = quizData[currentQuestion];
                questionEl.innerText = currentQuizData.question;
                const answers = [
                    currentQuizData.correct_answer,
                    ...currentQuizData.incorrect_answers
                ].sort(() => Math.random() - 0.5);
                a_text.innerText = answers[0];
                b_text.innerText = answers[1];
                c_text.innerText = answers[2];
                d_text.innerText = answers[3];
                
                if (userAnswers[currentQuestion]) {
                    document.querySelector(`#${userAnswers[currentQuestion].id}`).checked = true;
                    showAnswerFeedback();
                } else {
                    answerFeedback.style.display = 'none';
                    answerExplanation.style.display = 'none';
                }
                
                updateProgressBar();
                updateButtonStates();
                startTimer();
                quizHeader.style.animation = 'slideIn 0.5s ease-out';
            }, 300);
        }

        function deselectAnswers() {
            const answersEls = document.querySelectorAll('.answer');
            answersEls.forEach(answerEl => {
                answerEl.checked = false;
                answerEl.parentElement.classList.remove('correct-answer', 'wrong-answer');
            });
        }

        function getSelected() {
            const answersEls = document.querySelectorAll('.answer');
            let answer = undefined;
            answersEls.forEach(answerEl => {
                if (answerEl.checked) {
                    answer = answerEl.id;
                }
            });
            return answer;
        }

        function showAnswerFeedback() {
            const currentQuizData = quizData[currentQuestion];
            const selectedAnswer = getSelectedAnswerText();
            const selectedLabel = document.querySelector(`label[for="${getSelected()}"]`);
            answerFeedback.style.display = 'block';
            if (selectedAnswer === currentQuizData.correct_answer) {
                answerFeedback.style.backgroundColor = '#d4edda';
                answerFeedback.innerText = `Correct! The answer is: ${currentQuizData.correct_answer}`;
                selectedLabel.classList.add('correct-answer');
                correctSound.play();
            } else {
                answerFeedback.style.backgroundColor = '#f8d7da';
                answerFeedback.innerText = `Wrong. Correct answer: ${currentQuizData.correct_answer}`;
                selectedLabel.classList.add('wrong-answer');
                wrongSound.play();
            }
            showExplanation();
        }

        function showExplanation() {
            answerExplanation.style.display = 'block';
            answerExplanation.innerText = quizData[currentQuestion].explanation;
        }

        function getSelectedAnswerText() {
            const answer = getSelected();
            if (!answer) return null;
            const answers = [
                a_text.innerText,
                b_text.innerText,
                c_text.innerText,
                d_text.innerText
            ];
            return answers[['a', 'b', 'c', 'd'].indexOf(answer)];
        }

        function startTimer() {
            clearInterval(timer);
            timeLeft = 30;
            updateTimerDisplay();
            timer = setInterval(function () {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    checkAnswer();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            timerDisplay.innerText = timeLeft;
        }

        function checkAnswer() {
            clearInterval(timer);
            const answer = getSelected();
            if (answer) {
                const selectedAnswer = getSelectedAnswerText();
                userAnswers[currentQuestion] = { id: answer, text: selectedAnswer };
                
                if (selectedAnswer === quizData[currentQuestion].correct_answer && !submittedQuestions.has(currentQuestion)) {
                    score++;
                    submittedQuestions.add(currentQuestion);
                }
                showAnswerFeedback();
                updateScoreDisplay();
                submitBtn.disabled = true;
            }
        }

        function updateScoreDisplay() {
            currentScoreEl.innerText = score;
        }

        function updateProgressBar() {
            const progress = (currentQuestion / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        function updateButtonStates() {
            previousBtn.disabled = currentQuestion === 0;
            nextBtn.disabled = currentQuestion === quizData.length - 1;
            submitBtn.disabled = !!userAnswers[currentQuestion];
        }

        function showResults() {
            quizHeader.style.display = 'none';
            buttonContainer.style.display = 'none';
            progressContainer.style.display = 'none';
            timerDiv.style.display = 'none';
            scoreDisplay.style.display = 'none';
            resultsDiv.style.display = 'block';
            restartBtn.style.display = 'block';
            errorMessageDiv.style.display = 'none';
            resultsDiv.innerHTML = `You scored ${score}/${quizData.length}!<br><small>Check the leaderboard below!</small>`;
            finishSound.play();
            saveScore();
            displayLeaderboard();
            startConfetti();
        }

        function startConfetti() {
            const duration = 10 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 40, spread: 360, ticks: 80, zIndex: 0 };
            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }
            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }
                const particleCount = 100 * (timeLeft / duration);
                confetti({
                    ...defaults,
                    particleCount,
                    origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 },
                    colors: ['#ff6ec7', '#00f2fe', '#4facfe']
                });
                confetti({
                    ...defaults,
                    particleCount,
                    origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 },
                    shapes: ['star', 'circle']
                });
            }, 200);
        }

        function stopConfetti() {
            confetti.reset();
        }

        function saveScore() {
            const leaderboard = JSON.parse(localStorage.getItem('quizLeaderboard') || '[]');
            leaderboard.push({ score, topic: selectedTopic, date: new Date().toLocaleString() });
            leaderboard.sort((a, b) => b.score - a.score);
            localStorage.setItem('quizLeaderboard', JSON.stringify(leaderboard.slice(0, 5)));
        }

        function displayLeaderboard() {
            const leaderboard = JSON.parse(localStorage.getItem('quizLeaderboard') || '[]');
            const leaderboardDiv = document.createElement('div');
            leaderboardDiv.innerHTML = '<h3 class="text-lg font-bold mt-4">Leaderboard</h3>' +
                '<ul class="text-left">' +
                leaderboard.map((entry, i) => `<li>${i + 1}. ${entry.score}/${quizData.length} - ${entry.topic} (${entry.date})</li>`).join('') +
                '</ul>';
            resultsDiv.appendChild(leaderboardDiv);
        }

        previousBtn.addEventListener('click', () => {
            if (currentQuestion > 0) {
                clearInterval(timer);
                currentQuestion--;
                loadQuestion();
            }
        });

        homeBtn.addEventListener('click', () => {
            quizHeader.style.display = 'none';
            buttonContainer.style.display = 'none';
            progressContainer.style.display = 'none';
            timerDiv.style.display = 'none';
            scoreDisplay.style.display = 'none';
            topicSelection.style.display = 'grid';
            resultsDiv.style.display = 'none';
            restartBtn.style.display = 'none';
            errorMessageDiv.style.display = 'none';
            currentQuestion = 0;
            score = 0;
            userAnswers = [];
            submittedQuestions.clear();
            stopConfetti();
        });

        submitBtn.addEventListener('click', checkAnswer);

        nextBtn.addEventListener('click', () => {
            if (currentQuestion < quizData.length - 1) {
                clearInterval(timer);
                currentQuestion++;
                loadQuestion();
            } else {
                showResults();
            }
        });

        restartBtn.addEventListener('click', () => {
            topicSelection.style.display = 'grid';
            resultsDiv.style.display = 'none';
            restartBtn.style.display = 'none';
            errorMessageDiv.style.display = 'none';
            currentQuestion = 0;
            score = 0;
            userAnswers = [];
            submittedQuestions.clear();
            stopConfetti();
        });

        particlesJS('particles-js', {
            particles: {
                number: { value: 80, density: { enable: true, value_area: 800 } },
                color: { value: '#ffffff' },
                shape: { type: 'circle' },
                opacity: { value: 0.5, random: true },
                size: { value: 3, random: true },
                line_linked: { enable: false },
                move: { enable: true, speed: 2, direction: 'none', random: true }
            },
            interactivity: {
                detect_on: 'canvas',
                events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' } },
                modes: { repulse: { distance: 100 }, push: { particles_nb: 4 } }
            },
            retina_detect: true
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5

.0/dist/confetti.browser.min.js"></script>
    <footer>Copyright © 2024 - 2025 BidhanAcharya®. All rights reserved.</footer>

</body></html>
